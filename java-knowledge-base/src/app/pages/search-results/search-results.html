<section class="search-hero">
  <div class="container-xl">
    <a routerLink="/" class="back-link d-inline-flex align-items-center gap-1">
      <i class="fa-solid fa-arrow-left"></i>
      Back to Home
    </a>
    <h1>Search Results</h1>
    @if (query()) {
      <p class="search-info d-flex align-items-center gap-1">
        <i class="fa-solid fa-magnifying-glass info-icon"></i>
        {{ results().length }} results for "<strong>{{ query() }}</strong>"
      </p>
    }
  </div>
</section>

<section class="results-section">
  <div class="container-xl">
    @if (results().length > 0) {
      <div class="d-flex flex-column gap-3">
        @for (topic of results(); track topic.id) {
          <a [routerLink]="['/topic', topic.id]" class="result-card-link d-block">
            <mat-card appearance="outlined" class="result-card">
              <mat-card-content class="d-flex gap-3">
                <div class="flex-shrink-0">
                  <span class="result-icon">{{ topic.icon }}</span>
                </div>
                <div class="flex-grow-1 min-width-0">
                  <div class="result-header d-flex justify-content-between align-items-center mb-1">
                    <h3>{{ topic.title }}</h3>
                    <mat-chip [class]="getDifficultyClass(topic.difficulty)" highlighted>
                      <i [class]="getDifficultyIcon(topic.difficulty)"></i>
                      {{ topic.difficulty }}
                    </mat-chip>
                  </div>
                  <p class="result-category d-flex align-items-center gap-1">
                    <i class="fa-solid fa-folder cat-icon"></i>
                    {{ getCategoryName(topic.categoryId) }}
                  </p>
                  <p class="result-desc">{{ topic.description }}</p>
                  <div class="d-flex flex-wrap gap-1">
                    @for (tag of topic.tags; track tag) {
                      <mat-chip class="tag-chip">{{ tag }}</mat-chip>
                    }
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
          </a>
        }
      </div>
    } @else if (query()) {
      <div class="no-results text-center">
        <i class="fa-solid fa-magnifying-glass-minus empty-icon d-block"></i>
        <h2>No results found</h2>
        <p>Try searching for a different keyword or browse our <a routerLink="/">categories</a>.</p>
      </div>
    } @else {
      <div class="no-results text-center">
        <i class="fa-solid fa-magnifying-glass empty-icon d-block"></i>
        <h2>Enter a search term</h2>
        <p>Use the search bar above to find Java topics.</p>
      </div>
    }
  </div>
</section>
